<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>安裝 Japanese NLP Library</title>
  <meta name="description" content="本篇是介紹安裝 Japanese NLP Library 去做日文情緒判別。首先會介紹安裝 Japanese NLP Library，所需要的環境；接下來使用這個套件去做情緒判斷。" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@yiwei_girl" />
    <meta name="twitter:title" content="安裝 Japanese NLP Library" />
    <meta name="twitter:image" content="http://myblog.***.***/assets/images/me_logo.jpg" />
    
    <meta name="twitter:description"  content="本篇是介紹安裝 Japanese NLP Library 去做日文情緒判別。首先會介紹安裝 Japanese NLP Library，所需要的環境；接下來使用這個套件去做情緒判斷。" />
    
  
  
  <meta property="og:site_name" content="Yi Wei" />
  <meta property="og:title" content="安裝 Japanese NLP Library"/>
  
  <meta property="og:description" content="本篇是介紹安裝 Japanese NLP Library 去做日文情緒判別。首先會介紹安裝 Japanese NLP Library，所需要的環境；接下來使用這個套件去做情緒判斷。" />
  
  <meta property="og:image" content="http://myblog.***.***/assets/article_images/back.JPG" />
  <meta property="og:url" content="http://myblog.***.***/2017/04/25/japanese-nlp-library.html" >
  <meta property="og:type" content="blog" />
  <meta property="article:published_time" content="2017-04-25T16:45:11+08:00">

  <link rel="canonical" href="http://myblog.***.***/2017/04/25/japanese-nlp-library.html"/>
  <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/css/print.css" />
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->


<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="article-image">
          <div class="post-image-image" style="background-image: url(/assets/article_images/back.JPG)">
            Article Image
          </div>
          <div class="post-image-image2" style="background-image: url()">
            Article Image
          </div>
          <div class="post-meta">
            <h1 class="post-title">安裝 Japanese NLP Library</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/assets/images/me.JPG)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person">Yi Wei Huang</h4>
              on
              <time datetime="2017-04-25 16:45">25 Apr 2017</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
            <div style="text-align:center">
              <a href="#topofpage" class="topofpage"><i class="fa fa-angle-down"></i></a>
            </div>
          </div>
        </div>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>本篇是介紹安裝 Japanese NLP Library 去做日文情緒判別。
首先會介紹安裝 Japanese NLP Library，所需要的環境；接下來使用這個套件去做情緒判斷。</p>

<h1>安裝 Japanese NLP Library</h1>

<h3>前置環境</h3>

<ul>
<li>macOS Sierra</li>
<li>python2</li>
</ul>

<h3>前置環境需求</h3>

<ul>
<li>Third Party Dependencies

<ul>
<li><a href="https://sourceforge.net/projects/cabocha/">Cabocha</a> Japanese Morphological parser</li>
</ul></li>
</ul>

<h3>安裝 Cabocha</h3>

<ol>
<li><p>必需先安裝以下套件 CRF++ 、 MeCab 、 mecb-ipadic
後面兩個我們都安裝了，所以只需安裝第一個
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>$ brew install crf++</div></div></pre></div></figure></p></li>
<li><p>首先先下載<a href="https://sourceforge.net/p/cabocha/code/HEAD/tree/">Cabocha Source(cabocha-code-51)</a></p></li>
<li><p>解壓縮、設置、編譯、安裝
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>$ cd $HOME/Downloads
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>$ tar xvfz cabocha-code-51
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>$ cd cabocha-code-51
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>$ ./configure
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>$ make
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>$ sudo make install —enable-utf8-only</div></div></pre></div></figure></p></li>
<li><p>第三步後我們已經進入<code>cabocha-code-51</code>這個資料夾，為了能在 python 的環境使用 Cabocha，我們需要更深入去<code>python</code>的資料夾進行下面的操作
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>cabocha-code-51$ cd python
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>cabocha-code-51/python$ sudo python setup.py install　</div></div></pre></div></figure></p></li>
<li><p>接下來，可能會碰到安裝路徑錯誤這個問題
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>cabocha-code-51/python$ sudo python setup.py install
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>sh: cabocha-config: command not found
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>Traceback (most recent call last):
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>File &quot;setup.py&quot;, line 13, in
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>version = cmd1(&quot;cabocha-config --version&quot;),
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>File &quot;setup.py&quot;, line 7, in cmd1
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>return os.popen(str).readlines()[0][:-1]
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>IndexError: list index out of range　</div></div></pre></div></figure></p></li>
</ol>

<h3>解決 Cabocha 安裝路徑錯誤</h3>

<p>首先我們先進去 <code>setup.py</code> 的檔案，因為路徑設定有錯誤，所以我們在這邊做以下的修正：</p>

<p>看到第13行
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">version</span> <span class="o">=</span> <span class="n">cmd1</span><span class="p">(</span><span class="s">&quot;cabocha-config --version&quot;</span><span class="p">),</span></div></div></pre></div></figure></p>

<p>改成
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">version</span> <span class="o">=</span> <span class="n">cmd1</span><span class="p">(</span><span class="s">&quot;../cabocha-config --version&quot;</span><span class="p">),</span></div></div></pre></div></figure></p>

<p>第18到第20行
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">include<em>dirs</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;cabocha-config --inc-dir&quot;</span><span class="p">),</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">library</em>dirs</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;cabocha-config --libs-only-L&quot;</span><span class="p">),</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">libraries</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;cabocha-config --libs-only-l&quot;</span><span class="p">))</span></div></div></pre></div></figure></p>

<p>改成
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">include<em>dirs</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;../cabocha-config --inc-dir&quot;</span><span class="p">),</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">library</em>dirs</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;../cabocha-config --libs-only-L&quot;</span><span class="p">),</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">libraries</span> <span class="o">=</span> <span class="n">cmd2</span><span class="p">(</span><span class="s">&quot;../cabocha-config --libs-only-l&quot;</span><span class="p">))</span></div></div></pre></div></figure></p>

<p>這個 <code>cabocha-config</code> 檔案會在 <code>python</code> 資料夾的外面，所以路徑還要在上一層。</p>

<h3>另一個安裝 Cabocha 方式</h3>

<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>$ brew install cabocha</div></div></pre></div></figure>

<p>會提供這種方式是因為在上述，路徑錯誤這個問題解決後，應該在安裝<code>setup.py</code>是要成功的，但是我個人在
這邊會出現一個新的錯誤，錯誤資訊如下：
<figure class='code-highlight-figure'><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'>cabocha-code-51/python$ sudo python setup.py install
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>CaboCha_wrap.cxx:3046:10: fatal error: &#39;cabocha.h&#39; file not found
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>#include &quot;cabocha.h&quot;
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>^
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>1 error generated.
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>error: command &#39;cc&#39; failed with exit status 1</div></div></pre></div></figure></p>

<p>因為這個錯誤，讓我在思考是否直接以 Homebrew 去安裝 Cabocha 是最直接的方式。</p>

<p>這邊提供一個在 GitHub 上，其他人遇到的<a href="https://github.com/uetchy/cabocha-ruby/issues/1">相似問題</a>，他是在 ruby 的環境下去做安裝，而他在安裝 Cabocha 時，也是出現相同錯誤，有回覆者提出解決方案，也是使用 Homebrew 先去安裝，之後再使用 ruby 的安裝指令，再安裝一次。這樣就順利的安裝好 Cabocha。</p>

<p>P.S. 因為 Japanese NLP Library 只能跑 python2，所以在這邊 Cabocha 安裝是以 python2，如果 Cabocha 想安裝 python3，可以去修改<code>python/setup.py</code>這個檔案，因為 python3 不支援 <code>return string.split (cmd1(str))</code> 這個語法，所以可以將第十行修改為<code>return cmd1(str).split()</code></p>

<h1>如何使用 Japanese NLP Library</h1>

<p>可以參考 <a href="http://jprocessing.readthedocs.io/en/latest/#id2">Japanese NLP Library 文件</a>，這個文件是在教如何使用此套件的指令。
而我自己本身需要有關於字詞的<a href="http://jprocessing.readthedocs.io/en/latest/#sentiment-analysis-japanese-text">情緒判讀</a>。</p>

<!-- 下一篇會介紹目前實作的 Project，使用 MeCab 去切字，然後使用 Japanese NLP Library 去判別情緒。 -->

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=%E5%AE%89%E8%A3%9D+Japanese+NLP+Library&amp;url=http://myblog.***.***/2017/04/25/japanese-nlp-library"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/assets/images/me.JPG)">Blog Logo</div>
              <h4>Yi Wei Huang</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2017-04-25 16:45">25 Apr 2017</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Yi Wei Huang</a> &copy; 2017<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/assets/images/background.JPG)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Yi Wei</h1>
        <h2 class="blog-description">A student...
</h2>
        <a href=/ class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/assets/js/index.js"></script>
<script type="text/javascript" src="/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>


  </body>
</html>
